<!DOCTYPE html>
<html>

<head>
    <title>hello drag sort</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script src="../js/lib/Sortable.js">
    </script>
    <script src="../js/lib/jquery-3.2.1.min.js"></script>
    <style>
        * {
            outline: solid 1px #00FF00;
            /* height: 200px; */
        }

        body {
            font-size: 24px;
        }

        /* .row { */

        button {
            /* cursor: move; */
        }

        .list {
            margin-left: 30px;
        }

        #multi div {
            cursor: move;
        }

        .sort-ghostClass {
            outline: solid 1px #FF0000;
        }

        .sort-chosenClass {
            outline: solid 1px #0000FF;
        }
    </style>
    <script>
        function onload() {
            $(document).on('dragleave drop dragenter dragover', (e) => {
                e.preventDefault();
            })
            var opt = {
                // sort:false,
                draggable: ".row",
                handle: ".btndrag",
                group: 'photo',
                ghostClass: 'sort-ghostClass',
                filter:'.undrag',
                // chosenClass:'sort-chosenClass',
                animation: 150, //动画参数
                scorll: true,
                onMove:function(evt){
                    console.log("[debug] onMove", evt);
                },
                onStart: function (evt) {
                    // console.log("[debug] onStart", arguments, ":[arguments]");
                    console.log("[debug] onStart", evt);
                },
                onAdd: function (evt) {
                    // console.log("[debug] onAdd", arguments, ":[arguments]");
                    console.log("[debug] onAdd", evt);
                },
                onEnd: function (evt) {
                    // console.log("[debug] onEnd", arguments, ":[arguments]");
                    console.log("[debug] onEnd", evt);
                    // console.log("[debug]", evt.item, ":[evt.item]");
                    // console.log("[info]", evt.from, evt.oldIndex, ":[evt.from]");
                    // console.log("[info]", evt.to, evt.newIndex, ":[evt.to]");
                },
                onUpdate: function (evt) {
                    console.log("[debug] onUpdate", evt);
                },
            }
            var el = document.getElementById('items');
            var sortable = Sortable.create(el, opt);

            var el = document.getElementById('items2');
            var sortable = Sortable.create(el, opt);

            var el = document.getElementById('items21');
            var sortable = Sortable.create(el, opt);
            /*  Sortable.create(document.getElementById('multi'), {
                 animation: 150,
                 draggable: '.tile',
                 handle: '.tile__name'
             });
 
             [].forEach.call(document.getElementById('multi').getElementsByClassName('tile__list'), function (el) {
                 Sortable.create(el, {
                     group: 'photo',
                     animation: 150
                 });
             });*/
        }

    </script>
</head>

<body onload="onload()">
    <div id="items" class="list">
        <div class="row undrag">
            <div>item 1
                <button class="btndrag">drag</button>
            </div>
        </div>
        <div class="row">
            <div>item 2
                <button class="btndrag">drag</button>
            </div>
            <div id="items2" class="list">
                <div class="row">
                    <div>item 2 1</div>
                    <div id="items21" class="list">
                        <div class="row">
                            <div>item 2 1 1
                                <button class="btndrag">drag</button>
                            </div>
                        </div>
                        <div class="row">
                            <div>item 2 1 2
                                <button class="btndrag">drag</button>
                            </div>
                        </div>
                        <div class="row">
                            <div>item 2 1 3</div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div>item 2 2</div>
                </div>
                <div class="row">
                    <div>item 2 3</div>
                </div>
            </div>
        </div>
        <div class="row">
            <div>item 3</div>
        </div>
    </div>

    <div id="multi" style="margin-left: 30px;display: none;">
        <div>
            <div data-force="5" class="layer title title_xl">Multi</div>
        </div>

        <div class="layer tile" data-force="30">
            <div class="tile__name">Group A</div>
            <div class="tile__list">
                <div>AA</div>
                <!--
					-->
                <div>AB</div>
                <!--
					-->
                <div>AC</div>
                <!--
					-->
                <div>AD</div>
            </div>
        </div>

        <div class="layer tile" data-force="25">
            <div class="tile__name">Group B</div>
            <div class="tile__list">
                <div>BA</div>
                <!--
					-->
                <div>BB</div>
                <!--
					-->
                <div>BC</div>
            </div>
        </div>

        <div class="layer tile" data-force="20">
            <div class="tile__name">Group C</div>
            <div class="tile__list">
                <div>CA</div>
                <!--
					-->
                <div>CB</div>
            </div>
        </div>

    </div>
</body>